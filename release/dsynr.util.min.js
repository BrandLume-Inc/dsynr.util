class DsynrUIIElement{constructor(t,e){this.selfAbort=!1,this.prefAttr="dsynr-pref",lfn("DsynrUIIElement"),this.content=t;let n=this;DsynrUIIElement.instances.length>0&&DsynrUIIElement.instances.forEach(function(e,s){if(e.content===t)return n.selfAbort=!0,void l("already instantiated, aborting...")}),this.selfAbort||(this.preferences=e,this.setPref(),this.setParent(),DsynrUIIElement.instances.push(this),l(DsynrUIIElement.instances))}setPref(){if(lfn("setPref"),Object.keys(this.preferences).length>0)l("Object.keys(preferences).length:"+Object.keys(this.preferences).length);else{let t=getData(this.content,this.prefAttr);l(t),null!==t&&(l("parsing preferences as JSON"),this.preferences=JSON.parse(t))}updateProps(this,this.preferences)}setup(){}setParent(){lfn("setParent"),l(this.parent),void 0===this.parent&&(this.parent="parent"),"string"==typeof this.parent&&(l(this.parent),"parent"==this.parent?this.parent=this.content.parentElement:this.parent=getElementById(this.parent)),l(this.parent)}setDefaults(t=!1){lfn("setDefaults super "),this.animate=addProp(this,"animate",!0,t),this.animateClass=addProp(this,"animateClass","animated",t),this.animateInClass=addProp(this,"animateInClass",concatStr([this.animateClass,"fadeIn"]),t),this.animateOutClass=addProp(this,"animateOutClass",concatStr([this.animateClass,"fadeOut"]),t),this.animateAttentionClass=addProp(this,"animateOutClass",concatStr([this.animateClass,"heartBeat"]),t)}addListeners(){}setActive(){}attention(){}show(){}hide(){}destroy(){lfn("destroy"),this.instance.remove()}setName(t,e){return concatStr([this.namePrefix,t,this.nameSuffix],"-")}}DsynrUIIElement.instances=[];class DsynrModal extends DsynrUIIElement{constructor(t,e={}){super(t,e),this.selfAbort||(lfn("DsynrModal"),this.setDefaults(),this.setup())}setDefaults(t=!1){lfn("setDefaults"),super.setDefaults();this.adoptParent=addProp(this,"adoptParent",!0,t),this.animateModal=addProp(this,"animateModal",!0,t),this.autoDestroy=addProp(this,"autoDestroy",!0,t),this.displayTogether=addProp(this,"displayTogether",!0,t),this.useOverlay=addProp(this,"useOverlay",!0,t),this.disableUnderlay=addProp(this,"disableUnderlay",!0,t),this.animateUnderlay=addProp(this,"animateUnderlay",!0,t),this.nameSuffix=addProp(this,"nameSuffix",DsynrModal.instances.length.toString(),t),this.namePrefix=addProp(this,"namePrefix","dsynrModal",t),this.modalAnimateInClass=addProp(this,"modalAnimateInClass",concatStr([this.animateClass,"flipInX"]),t),this.modalAnimateOutClass=addProp(this,"modalAnimateOutClass",concatStr([this.animateClass,"flipOutY"]),t),this.modalAnimateAttentionClass=addProp(this,"modalAnimateAttentionClass",concatStr([this.animateClass,"shake"]),t),this.overlayClass=addProp(this,"overlayClass","o50 bg-dark",t),this.parentSizingClass=addProp(this,"sizingClass","wmax hmax",t),this.windowSizingClass=addProp(this,"windowSizingClass","vw vh",t),this.underlayClass=addProp(this,"underlayClass",concatStr(["position-absolute","top left",this.parentSizingClass,"z1"]),t),this.instanceClass=addProp(this,"instanceClass",concatStr(["position-absolute","z2 o0"]),t),this.instanceRootClass=addProp(this,"instanceRootClass",concatStr(["position-absolute","top left",this.parentSizingClass,"z3 o0 d-none"]),t),this.trigger=addProp(this,"trigger","auto",t)}setup(){lfn("setup");let t=this;addClass(this.content,"d-none"),"auto"!=this.trigger?(l("setting trigger to : "+this.trigger),addListener(this.trigger,"click",function(){t.show()}),l("Modal Trigger READY!")):(l("Triggering Automatically..."),this.show())}show(){DsynrModal.activeInstance!==this&&(lfn("show via : "+this.trigger),addClass(this.content,"o0"),removeClass(this.content,"d-none"),void 0===this.parent&&(l("parent unavailable, adding modal to body"),this.parent=document.body),this.instanceRoot=addDiv(this.setName("root",this.content.id),this.instanceRootClass,this.parent),this.disableUnderlay?(this.useOverlay&&(this.underlayClass=concatStr([this.underlayClass,this.overlayClass])),this.underlay=addDiv(this.setName("underlay",this.content.id),this.underlayClass,this.instanceRoot)):removeClass(this.instanceRoot,this.parentSizingClass),this.instance=addDiv(this.setName("modal",this.parent.id),this.instanceClass,this.instanceRoot),this.addListeners(),this.instance.appendChild(this.content),removeClass(this.instanceRoot,"d-none"),removeClass(this.instance,"o0"),removeClass(this.content,"o0"),l(this.parent.id),this.adoptParent&&(this.content.clientHeight>this.parent.clientHeight||this.content.clientWidth>this.parent.clientWidth)&&(lfn("adoptParent"),l("parent cannot accommodate child, adopting body as parent!"),this.parent=document.body,this.parent.append(this.instanceRoot),this.resizeRoot()),this.align(),this.animateDisplay(),this.setActive())}attention(){lfn("attention"),this.animateDisplay(!0)}animateDisplay(t=!1){lfn("animateDisplay"),this.displayTogether&&(this.animate&&this.animateUnderlay?t?(removeClass(this.instanceRoot,this.animateInClass),addClass(this.instanceRoot,this.animateAttentionClass),removeClass(this.instance,this.modalAnimateInClass),addClass(this.instance,this.modalAnimateAttentionClass)):(addClass(this.instanceRoot,this.animateInClass),addClass(this.instance,this.modalAnimateInClass)):t||(removeClass(this.instanceRoot,"o0"),removeClass(this.instance,"o0")))}hide(t=this.autoDestroy){lfn("hide"),this.useOverlay&&(removeClass(this.instanceRoot,this.modalAnimateInClass),addClass(this.instanceRoot,this.modalAnimateOutClass)),t&&(l("TODO ONANIMATIONEND LISTENER..."),this.destroy()),DsynrModal.activeInstance=!1}resizeRoot(){lfn("resizeRoot"),this.parent==document.body?(removeClass(this.instanceRoot,this.parentSizingClass),addClass(this.instanceRoot,this.windowSizingClass)):(this.instanceRoot.style.width=getCssDimension(this.parent.clientWidth),this.instanceRoot.style.height=getCssDimension(this.parent.clientHeight))}destroy(){lfn("destroying modal.."),this.instanceRoot.remove()}setActive(){lfn("setActive"),this.instanceRoot=this.instanceRoot,this.content.focus(),DsynrModal.activeInstance=this}addListeners(){lfn("addListeners");let t=this;this.animate&&(l("enabling animation"),this.instance.addEventListener(transitionEvent,t.modalHidden))}blanketHidden(t){let e;e=getElementById("blanket"),"fadeOut"==t.animationName&&(e.removeEventListener(transitionEvent,this.blanketHidden),e.remove())}align(){lfn("align"),this.disableUnderlay||addClass(this.instanceRoot,this.parentSizingClass),centereStage(this.instance),this.disableUnderlay}modalHidden(t){"zoomOut"==t.animationName&&(this.instanceRoot.classList.add("d-none"),this.instanceRoot.classList.remove("zoomOut"),this.instanceRoot.removeEventListener(transitionEvent,this.modalHidden))}static auto(t="dsynrModal"){lfn("auto"),makeArray(getElementsByClass(t)).forEach(function(t){new DsynrModal(t)})}}class DsynrSelect extends DsynrUIIElement{constructor(t,e={}){super(t,e),this.selfAbort||(lfn("DsynrSelect"),this.setDefaults(),this.setup())}setDefaults(t=!1){super.setDefaults(),lfn("setDefaults"),this.adoptParent=addProp(this,"adoptParent",!0,t),this.nameSuffix=addProp(this,"nameSuffix",DsynrSelect.instances.length.toString(),t),this.namePrefix=addProp(this,"namePrefix","dsynrEnhancedSelect",t),this.optionPrefix=addProp(this,"namePrefix",concatStr([this.namePrefix,"option"],"-"),t),this.instanceClass=addProp(this,"instanceClasses",concatStr([this.namePrefix,"rounded bg-light shadow p-5"]),t),this.showFinder=addProp(this,"showFinder",!1,t),this.autoExit=addProp(this,"autoExit",!0,t),this.isActive=addProp(this,"isActive",!1,t),this.triggerCls=addProp(this,"btnCls",concatStr([this.namePrefix,"trigger btn btn-link"],"-"),t),this.optCls=addProp(this,"optCls",concatStr([this.optionPrefix,"hand p-2"]),t),this.optClsActive=addProp(this,"optClsActive","active bg-warning rounded",t)}setup(){lfn("setup"),""===this.content.id&&(this.content.id="dsynrSelect-"+DsynrSelect.instances.length),this.options=this.content.options,this.option=this.options[this.options.selectedIndex],this.setTrigger(),l("Select Trigger READY!")}show(){if(lfn("show triggered via : "+this.trigger.id),this.isActive)this.attention();else{this.instance=addDiv(this.setName("",this.content.id),this.instanceClass);let t=this;makeArray(this.options).forEach(function(e,n){t.addESOption(e,n)}),this.modalPref=mergeObjs(this.preferences,{trigger:"auto",parent:this.parent,adoptParent:this.adoptParent}),this.modal=new DsynrModal(this.instance,this.modalPref),this.setActive()}}attention(){DsynrSelect.activeInstance=this,this.modal.attention()}update(t){lfn("update"),removeClass(this.esPrevOpt,this.optClsActive),this.option=t,addClass(this.option,this.optClsActive),this.esPrevOpt=getElementById(t.id),this.content.selectedIndex=parseInt(getData(t,"index")),this.trigger.textContent=this.option.innerText,this.autoExit&&this.destroy()}addESOption(t,e){lfn("addESOption");let n,s=concatStr([this.optionPrefix,this.content.id,e],"-");l(this.esPrevOpt),addDiv(s,n=e==this.content.selectedIndex?concatStr([this.optCls,this.optClsActive]):n=this.optCls,this.instance),e==this.option.index&&(this.esPrevOpt=getElementById(s));let i=getElementById(s);i.textContent=t.text,setData(i,"index",t.index.toString());let a=this;addListener(i.id,"click",function(){lclk(i.id),a.update(i)})}setTrigger(){lfn("addTrigger"),this.trigger=addDiv(this.setName("btn",this.content.id),this.triggerCls,this.content.parentElement),addText(this.option.text,this.trigger);let t=this;addListener(this.trigger.id,"click",function(){t.show()}),hide(this.content)}destroy(){lfn("destroy"),this.modal.hide(!0),this.isActive=!1,DsynrSelect.activeInstance=!1}setActive(){lfn("setActive"),this.isActive=!0,DsynrSelect.activeInstance=this}static auto(t="dsynrSelect"){lfn("auto"),makeArray(getElementsByClass(t)).forEach(function(t){new DsynrSelect(t)})}}function gtag(t,e,n){}function PING(t,e){}function getData(t,e){return t.getAttribute("data-"+e)}function setData(t,e,n=""){t.setAttribute("data-"+e,n)}function debounce(t,e){let n;return e=e||100,function(){clearTimeout(n);let s=arguments,i=this;n=setTimeout(function(){t.apply(i,s)},e)}}function concatStr(t,e=" "){return t.join(e)}function getPercentage(t,e){return t*e/100}function getRandFloor(t=0,e=255){return getRandDecimal(t,e,0)}function getRandNum(t=0,e=255){return Math.round(getRandDecimal(t,e,0))}function getRandDecimal(t=0,e=1,n=2){return parseFloat((Math.random()*(e-t)+t).toFixed(n))}function getRandomArbitrary(t,e){return Math.random()*(e-t)+t}function makeArray(t){return Array.from(t)}function get_rand_array_item(t){return t[Math.floor(Math.random()*t.length)]}function get_rand_obj_item(t){let e=Object.keys(t);return t[e[e.length*Math.random()<<0]]}function addProp(t,e,n,s=!1){return!s&&t.hasOwnProperty(e)||Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}),t[e]}function updateProps(t,e){lfn("updateProps...");for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]),l(n+":"+t[n])}function mergeObjs(t,e){for(let n in e)t[n]=e[n];return t}function hasInstance(t,e){lfn("hasInstance"),l(t);let n=!1;return t.forEach(function(t,s){t!==e||(n=!0)}),l(n),n}function getRandColour(){return"#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6)}function getRandColourRGBA(t=1,e=255,n=255,s=255){return"rgba("+getRandFloor(0,e)+","+getRandFloor(0,n)+","+getRandFloor(0,s)+","+getRandDecimal(0,t)+")"}function getCssDimension(t,e="px"){return t+e}function randRadius(){return getRandomArbitrary(5,150)}function randWidth(){return getRandomArbitrary(2,15)}function getDimensions(t){return{w:t.clientWidth,h:t.clientHeight}}function hide(t){t.style.display="none"}function addClass(t,e){t.classList.add(...e.split(" "))}function removeClass(t,e){t.classList.remove(...e.split(" "))}function hasClass(t,e){return t.classList.contains(e)}function addDiv(t="",e="",n=document.body){let s=document.createElement("DIV");return s.id=t,s.className=e,n.appendChild(s),s}function addText(t="",e){e.appendChild(document.createTextNode(t))}function getElementsBySelector(t){return document.querySelectorAll(t)}function getElementsByTag(t){return document.querySelectorAll(t)}function getElementsByClass(t){return document.getElementsByClassName(t)}function getElementById(t){return window[t]}let vw,vh,transitionEvent=whichAnimationEvent();function animateIn(){makeArray(getElementsByClass("animated")).forEach(t=>{null!==getData(t,"ani")&&null!=getData(t,"ani")&&isInViewportSlightly(t)&&(t.classList.remove("o0"),t.classList.add(t.dataset.ani))})}function whichAnimationEvent(){let t,e=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in n)if(void 0!==e.style[t])return n[t]}function addListener(t,e,n){void 0!==getElementById(t)&&getElementById(t).addEventListener(e,n)}function removeListener(t,e,n){getElementById(t).removeEventListener(e,n)}function addEvent(t,e,n){makeArray(t).forEach(t=>{t.addEventListener(e,n),l(t)})}function centereStage(t){let e=getDimensions(t);t.style.marginTop=getCssDimension(-e.h/2),t.style.marginLeft=getCssDimension(-e.w/2),t.style.top="50%",t.style.left="50%"}function updateViewportVars(){vw=window.innerWidth,vh=window.innerHeight}function getBounds(t){return t.getBoundingClientRect()}function isInViewportSlightly(t){return getBounds(t).top>=0}function isInViewportMostly(t){let e=getBounds(t);return e.top/2>-e.top}updateViewportVars();